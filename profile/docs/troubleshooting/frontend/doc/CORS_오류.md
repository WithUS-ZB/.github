# CORS 오류
작성자: 우승찬
## 1. 문제 상황

로그인을 시도할 때 백엔드와의 통신 중 CORS-safelisted response header 문제가 발생하였습니다. 클라이언트 측에서 서버로부터 반환된 헤더 중 토큰 정보에 접근하려 했으나, 이 헤더가 CORS-safelisted에 포함되지 않아 접근할 수 없었습니다.

## 2. 원인
CORS 정책에 따라 브라우저는 보안을 이유로 다른 출처의 리소스에 제한된 접근을 허용합니다. 표준 CORS-safelisted response headers에 포함되지 않은 헤더는 기본적으로 react에서 읽을 수 없습니다. 이 경우 서버에서 보내는 **`accessToken`**이라는 사용자 정의 헤더가 이에 해당하며, 이 헤더에 대한 접근을 서버가 명시적으로 허용하지 않아 발생한 문제입니다.

## 3. 해결 방안

**서버 설정 변경**: 서버 측에서 응답 헤더에 **`Access-Control-Expose-Headers`**를 추가하여 **`accessToken`** 헤더를 명시적으로 노출시켜 데이터를 가지고 올 수 있었습니다.

### [Weekly Review]

CORS 정책과 관련된 문제를 해결하면서 CORS의 무서움을 알게 되었습니다. 처음 문제를 직면했을때 서로 무엇이 잘못된지 모르고 console도 찍어보고 네트워크 요청 상태도 확인하고 하면서 백엔드에서는 Access-control-Expose-Headers 를 추가해서 접근을 허용해야 한다는 사실을 알게 되었고 저는 앞으로 코드의 문제가 생겼을때 내 코드에 문제가 있다 수정해야 된다 라는 생각을 하기 앞서 무엇이 원인인지 제대로 오류 코드를 분석하고 알아봐야 한다는 깊은 깨달음을 얻었습니다.